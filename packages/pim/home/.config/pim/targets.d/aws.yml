# PIM AWS AMI Target
# Build AMI directly on AWS using amazon-ebs builder
# Or convert qcow2 to AMI via S3 import (aws-import method)

aws:
  builder: aws-ebs

  # AWS settings (override in project or build)
  aws_region: us-east-1
  # aws_access_key: ""      # Or use AWS_ACCESS_KEY_ID env
  # aws_secret_key: ""      # Or use AWS_SECRET_ACCESS_KEY env

  # Source AMI - Debian 12 official (amd64, us-east-1)
  # Find latest at: https://wiki.debian.org/Cloud/AmazonEC2Image
  source_ami: ami-0f9de6e2d2f067fca

  # Instance settings
  aws_instance_type: t3.micro

  # EBS volume settings
  aws_volume_type: gp3
  aws_volume_size: 20

  # SSH settings (Debian AMIs use 'admin')
  ssh_username: admin

# Alternative: Import from qcow2 (uses different builder path)
aws-import:
  builder: qcow2-convert

  aws_region: us-east-1
  # aws_s3_bucket: my-ami-import-bucket  # Required for import

  # AMI settings
  aws_ena_support: true
  aws_sriov_support: simple

  # Root device
  aws_root_device_name: /dev/xvda
  aws_volume_type: gp3
  aws_volume_size: 20

  aws_architecture: x86_64
